{"version":3,"sources":["main.js"],"names":["submit","document","querySelector","email","form","URL","addEventListener","evt","validity","patternMismatch","setCustomValidity","valueMissing","data","name","lang","service","upload","obj","xhr","XMLHttpRequest","responseType","status","console","log","response","statusText","timeout","open","setRequestHeader","send","JSON","stringify","Object","keys","reduce","a","k","push","encodeURIComponent","join","preventDefault","value"],"mappings":"AAAA,IAAIA,OAASC,SAASC,cAAc,iBAChCC,MAAQF,SAASC,cAAc,sBAC/BE,KAAOH,SAASC,cAAc,SAC9BG,IAAM,mDAGVF,MAAMG,iBAAiB,UAAW,SAAUC,GACtCJ,MAAMK,SAASC,gBACjBN,MAAMO,kBAAkB,uCACfP,MAAMK,SAASG,aACxBR,MAAMO,kBAAkB,kBAExBP,MAAMO,kBAAkB,MAI5B,IAAIE,KAAO,CACTT,MAAO,GACPU,KAAM,GACNC,KAAM,KACNC,QAAS,aAGPC,OAAS,SAAUC,GACrB,IAEyBA,EAFrBC,EAAM,IAAIC,eAUdD,EAAIE,aAAe,OAEnBF,EAAIZ,iBAAiB,OAAQ,WACR,MAAfY,EAAIG,OACNC,QAAQC,IAAIL,EAAIM,UAEhBF,QAAQC,IAAI,kBAAoBL,EAAIG,OAAS,IAAMH,EAAIO,cAI3DP,EAAIZ,iBAAiB,QAAS,WAC5BgB,QAAQC,IAAI,iCAGdL,EAAIZ,iBAAiB,UAAW,WAC9BgB,QAAQC,IAAI,kCAAoCL,EAAIQ,QAAU,QAGhER,EAAIQ,QAAU,IAEdR,EAAIS,KAAK,OAAQtB,KACjBa,EAAIU,iBAAiB,eAAgB,qCAErCV,EAAIW,MA/BqBZ,EA+BN,CACjBL,KAAMkB,KAAKC,UAAUd,IA9Bde,OAAOC,KAAKhB,GAAKiB,OAAO,SAAUC,EAAGC,GAE1C,OADAD,EAAEE,KAAKD,EAAI,IAAME,mBAAmBrB,EAAImB,KACjCD,GACN,IAAII,KAAK,QA+BhBnC,KAAKE,iBAAiB,SAAU,SAAUC,GAExCA,EAAIiC,iBAEJ5B,KAAKT,MAAQA,MAAMsC,MAEnBzB,OAAOJ","file":"main.js","sourcesContent":["var submit = document.querySelector('.form__submit');\r\nvar email = document.querySelector('.form__input--mail');\r\nvar form = document.querySelector('.form');\r\nvar URL = 'http://192.168.10.50/verify/request_service_info';\r\n\r\n\r\nemail.addEventListener('invalid', function (evt) {\r\n  if (email.validity.patternMismatch) {\r\n    email.setCustomValidity('Please enter a valid email address.');\r\n  } else if (email.validity.valueMissing) {\r\n    email.setCustomValidity('Required field');\r\n  } else {\r\n    email.setCustomValidity('');\r\n  }\r\n});\r\n\r\nvar data = {\r\n  email: '',\r\n  name: '',\r\n  lang: 'en',\r\n  service: 'deex_cash'\r\n};\r\n\r\nvar upload = function (obj) {\r\n  var xhr = new XMLHttpRequest();\r\n\r\n  var serialize = function(obj)  {\r\n    debugger;\r\n    return Object.keys(obj).reduce(function (a, k) {\r\n      a.push(k + \"=\" + encodeURIComponent(obj[k]));\r\n      return a;\r\n    }, []).join(\"&\");\r\n  };\r\n\r\n  xhr.responseType = 'json';\r\n\r\n  xhr.addEventListener('load', function () {\r\n    if (xhr.status === 200) {\r\n      console.log(xhr.response);\r\n    } else {\r\n      console.log('Статус ответа: ' + xhr.status + ' ' + xhr.statusText);\r\n    }\r\n  });\r\n\r\n  xhr.addEventListener('error', function () {\r\n    console.log('Произошла ошибка соединения');\r\n  });\r\n\r\n  xhr.addEventListener('timeout', function () {\r\n    console.log('Запрос не успел выполниться за ' + xhr.timeout + 'мс');\r\n  });\r\n\r\n  xhr.timeout = 10000;\r\n\r\n  xhr.open('POST', URL);\r\n  xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\r\n\r\n  xhr.send(serialize({\r\n    data: JSON.stringify(obj)\r\n  }));\r\n};\r\n\r\nform.addEventListener('submit', function (evt) {\r\n\r\n  evt.preventDefault();\r\n\r\n  data.email = email.value;\r\n\r\n  upload(data);\r\n\r\n});"]}