{"version":3,"sources":["main.js"],"names":["submit","document","querySelector","email","form","URL","addEventListener","evt","validity","patternMismatch","setCustomValidity","valueMissing","data","name","lang","service","upload","obj","xhr","window","XMLHttpRequest","ActiveXObject","CatchException","open","status","console","log","response","modalSuccessWrap","style","display","keyCode","modalSuccessClose","statusText","timeout","responseType","setRequestHeader","send","JSON","stringify","Object","keys","reduce","a","k","push","encodeURIComponent","join","preventDefault","value"],"mappings":"AAAA,IAAIA,OAASC,SAASC,cAAc,iBAChCC,MAAQF,SAASC,cAAc,sBAC/BE,KAAOH,SAASC,cAAc,SAC9BG,IAAM,uDAMVF,MAAMG,iBAAiB,UAAW,SAAUC,GACtCJ,MAAMK,SAASC,gBACjBN,MAAMO,kBAAkB,uCACfP,MAAMK,SAASG,aACxBR,MAAMO,kBAAkB,kBAExBP,MAAMO,kBAAkB,MAI5B,IAAIE,KAAO,CACTT,MAAO,GACPU,KAAM,GACNC,KAAM,KACNC,QAAS,aAGPC,OAAS,SAAUC,GAErB,IAAIC,EAEJ,GAAIC,OAAOC,eAETF,EAAM,IAAIE,oBACL,GAAID,OAAOE,cAEhB,IACEH,EAAM,IAAIG,cAAc,qBACxB,MAAOC,GACPJ,EAAM,IAAIG,cAAc,kBAI5B,IAA0BJ,EAO1BC,EAAIK,KAAK,OAAQlB,KAEjBa,EAAIZ,iBAAiB,OAAQ,WACR,MAAfY,EAAIM,QACNC,QAAQC,IAAIR,EAAIS,UAEhBC,iBAAiBC,MAAMC,QAAU,OAEjC7B,SAASK,iBAAiB,UAAW,SAAUC,GACzB,KAAhBA,EAAIwB,UACNH,iBAAiBC,MAAMC,QAAU,UAIrC7B,SAASK,iBAAiB,QAAS,SAAUC,GAC3CqB,iBAAiBC,MAAMC,QAAU,SAGnCE,kBAAkB1B,iBAAiB,QAAS,WAC1CsB,iBAAiBC,MAAMC,QAAU,UAGnCL,QAAQC,IAAI,kBAAoBR,EAAIM,OAAS,IAAMN,EAAIe,cAI3Df,EAAIZ,iBAAiB,QAAS,WAC5BmB,QAAQC,IAAI,iCAGdR,EAAIZ,iBAAiB,UAAW,WAC9BmB,QAAQC,IAAI,kCAAoCR,EAAIgB,QAAU,QAGhEhB,EAAIgB,QAAU,IAGdhB,EAAIiB,aAAe,OACnBjB,EAAIkB,iBAAiB,eAAgB,qCAErClB,EAAImB,MA/CsBpB,EA+CP,CACjBL,KAAM0B,KAAKC,UAAUtB,IA/CduB,OAAOC,KAAKxB,GAAKyB,OAAO,SAAUC,EAAGC,GAE1C,OADAD,EAAEE,KAAKD,EAAI,IAAME,mBAAmB7B,EAAI2B,KACjCD,GACN,IAAII,KAAK,QAgDhB3C,KAAKE,iBAAiB,SAAU,SAAUC,GAExCA,EAAIyC,iBAEJpC,KAAKT,MAAQA,MAAM8C,MAEnBjC,OAAOJ","file":"main.js","sourcesContent":["var submit = document.querySelector('.form__submit');\r\nvar email = document.querySelector('.form__input--mail');\r\nvar form = document.querySelector('.form');\r\nvar URL = 'https://pp.deex.exchange/verify/request_service_info';\r\n\r\n// var subscrURL = 'https://pp.deex.exchange/verify/request_service_info';\r\n// var subscrURL = 'https://api-test.presale-deex.exchange/verify/request_service_info';\r\n\r\n\r\nemail.addEventListener('invalid', function (evt) {\r\n  if (email.validity.patternMismatch) {\r\n    email.setCustomValidity('Please enter a valid email address.');\r\n  } else if (email.validity.valueMissing) {\r\n    email.setCustomValidity('Required field');\r\n  } else {\r\n    email.setCustomValidity('');\r\n  }\r\n});\r\n\r\nvar data = {\r\n  email: '',\r\n  name: '',\r\n  lang: 'en',\r\n  service: 'deex_cash'\r\n};\r\n\r\nvar upload = function (obj) {\r\n\r\n  var xhr;\r\n\r\n  if (window.XMLHttpRequest) {\r\n    //Gecko-совместимые браузеры, Safari, Konqueror\r\n    xhr = new XMLHttpRequest();\r\n  } else if (window.ActiveXObject) {\r\n    //Internet explorer\r\n    try {\r\n      xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    } catch (CatchException) {\r\n      xhr = new ActiveXObject(\"Msxml2.XMLHTTP\");\r\n    }\r\n  }\r\n\r\n  var serialize = function (obj) {\r\n    return Object.keys(obj).reduce(function (a, k) {\r\n      a.push(k + \"=\" + encodeURIComponent(obj[k]));\r\n      return a;\r\n    }, []).join(\"&\");\r\n  };\r\n\r\n  xhr.open('POST', URL);\r\n\r\n  xhr.addEventListener('load', function () {\r\n    if (xhr.status === 200) {\r\n      console.log(xhr.response);\r\n\r\n      modalSuccessWrap.style.display = 'flex';\r\n\r\n      document.addEventListener('keydown', function (evt) {\r\n        if (evt.keyCode === 27) {\r\n          modalSuccessWrap.style.display = 'none';\r\n        }\r\n      });\r\n\r\n      document.addEventListener('click', function (evt) {\r\n        modalSuccessWrap.style.display = 'none';\r\n      });\r\n\r\n      modalSuccessClose.addEventListener('click', function () {\r\n        modalSuccessWrap.style.display = 'none';\r\n      });\r\n    } else {\r\n      console.log('Статус ответа: ' + xhr.status + ' ' + xhr.statusText);\r\n    }\r\n  });\r\n\r\n  xhr.addEventListener('error', function () {\r\n    console.log('Произошла ошибка соединения');\r\n  });\r\n\r\n  xhr.addEventListener('timeout', function () {\r\n    console.log('Запрос не успел выполниться за ' + xhr.timeout + 'мс');\r\n  });\r\n\r\n  xhr.timeout = 10000;\r\n\r\n\r\n  xhr.responseType = 'json';\r\n  xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\r\n\r\n  xhr.send(serialize({\r\n    data: JSON.stringify(obj)\r\n  }));\r\n};\r\n\r\nform.addEventListener('submit', function (evt) {\r\n\r\n  evt.preventDefault();\r\n\r\n  data.email = email.value;\r\n\r\n  upload(data);\r\n\r\n});"]}