var subscribeBlock=document.querySelector(".main-subscribe-block"),btnClose=document.querySelector(".close-btn"),subscribeMail=subscribeBlock.querySelector(".subscribe__input"),subscrForm=subscribeBlock.querySelector(".subscribe__form"),modalSuccessWrap=document.querySelector(".modal__success-wrap"),modalSuccessClose=document.querySelector(".modal__success-close"),subscrURL="https://pp.deex.exchange/verify/request_service_info";subscribeMail.addEventListener("invalid",function(e){subscribeMail.validity.patternMismatch?subscribeMail.setCustomValidity("Please enter a valid email address."):subscribeMail.validity.valueMissing?subscribeMail.setCustomValidity("Required field"):subscribeMail.setCustomValidity("")});var readyLoad=function(){setTimeout(function(){subscribeBlock.classList.add("is-subscribe-open")},1e4)};btnClose.addEventListener("click",function(e){e.preventDefault(),subscribeBlock.classList.remove("is-subscribe-open")});var uploadSubscr=function(e){var t,s=new XMLHttpRequest;s.open("POST",subscrURL),s.addEventListener("load",function(){200===s.status?(console.log(s.response),modalSuccessWrap.style.display="flex",document.addEventListener("keydown",function(e){27===e.keyCode&&(modalSuccessWrap.style.display="none")}),document.addEventListener("click",function(e){modalSuccessWrap.style.display="none"}),modalSuccessClose.addEventListener("click",function(){modalSuccessWrap.style.display="none"})):console.log("Статус ответа: "+s.status+" "+s.statusText)}),s.addEventListener("error",function(){console.log("Произошла ошибка соединения")}),s.addEventListener("timeout",function(){console.log("Запрос не успел выполниться за "+s.timeout+"мс")}),s.timeout=1e4,s.responseType="json",s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send((t={data:JSON.stringify(e)},Object.keys(t).reduce(function(e,s){return e.push(s+"="+encodeURIComponent(t[s])),e},[]).join("&")))};subscrForm.addEventListener("submit",function(e){e.preventDefault(),data.email=subscribeMail.value,uploadSubscr(data)}),document.addEventListener("DOMContentLoaded",readyLoad);
//# sourceMappingURL=subscribe.js.map
